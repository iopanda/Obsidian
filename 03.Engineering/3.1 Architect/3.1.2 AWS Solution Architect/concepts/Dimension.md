---
aliases: 维度, Dimension
created_at: 2023-05-08 19:35
tags: data warehouse, data analysis
---

# 概念

维度是对[事实](https://en.wikipedia.org/wiki/Fact_(data_warehouse) "事实（数据仓库）")和[度量](https://en.wikipedia.org/wiki/Measure_(data_warehouse) "度量（数据仓库）")进行分类以使用户能够回答业务问题的**结构**。

# 分类

### 缓慢变化的维度

[缓慢变化的维度](https://en.wikipedia.org/wiki/Slowly_changing_dimension "缓慢变化的次元")是一组在一段时间内缓慢变化而不是定期变化的数据属性，例如地址或名称。这些属性会在一段时间内发生变化，并且会组合成一个缓慢变化的维度。这些维度可以分为以下类型：
-   **Type 0 (Retain original)** : 属性永不改变。没有历史。
-   **类型 1（覆盖）**：旧值被属性的新值覆盖。没有历史。
-   **类型 2（添加新行）**：使用开始日期/结束日期或新值的版本创建新行。这创造了历史。
-   **类型 3（添加新属性）**：为新值创建新列。历史仅限于指定用于存储历史数据的列数。
-   **类型 4（添加历史表）**：一个表保存当前值，而历史保存在第二个表中。
-   **类型 5（组合方法 1 + 4）**：类型 1 和类型 4 的组合。历史是通过第二个历史表创建的。
-   **类型 6（组合方法 1 + 2 + 3）**：类型 1、类型 2 和类型 3 的组合。通过单独的行和属性创建历史记录。
-   **类型 7（混合方法）**：同时使用代理项和自然键。

### 一致维度

一致维度是一组数据属性，这些属性已在多个数据库表中物理引用，使用相同的键值来引用相同的结构、属性、域值、定义和概念。一致的维度跨越许多事实。

当维度完全相同（包括键）或一个是另一个的真子集时，维度是一致的。最重要的是，来自相同一致性维度的两个不同答案集中生成的行标题必须能够完美匹配。

一致性维度是最细粒度、最详细维度的相同或严格的数学子集。如果属性的标签不同或包含不同的值，则维度表不一致。一致的维度有几种不同的风格。在最基本的层面上，符合维度与它们连接到的每个可能的事实表的含义完全相同。连接到销售事实的日期维度表与连接到库存事实的日期维度相同。

### 垃圾维度

垃圾维度是一组方便的典型低基数标志和指示符。通过创建一个抽象维度，这些标志和指示器从事实表中删除，同时将它们放入一个有用的维度框架中。垃圾维度是由不属于事实表或任何现有维度表的属性组成的维度表。这些属性的性质通常是文本或各种标志，例如非通用评论或只是简单的是/否或真/假指示符。当识别出业务流程中所有明显的维度时，通常会保留这些类型的属性，因此设计人员面临将这些不属于其他维度的属性放在哪里的挑战。

一种解决方案是为每个剩余属性创建一个新维度，但由于它们的性质，可能需要创建大量新维度，从而导致事实表具有大量外键。设计者还可以决定将其余属性保留在事实表中，但这可能会使表的行长度不必要地变大，例如，如果属性是一个长文本字符串。

这一挑战的解决方案是识别所有属性，然后将它们放入一个或多个 Junk Dimensions 中。一个 Junk Dimension 可以包含多个 true/false 或 yes/no 指标，它们之间没有关联，因此将指标转换为更具描述性的属性会很方便。一个例子是关于包裹是否已到达的指示器：不是将其指示为“是”或“否”，而是在垃圾维度中将其转换为“已到达”或“待处理”。设计者可以选择构建维度表，使其最终保存所有与其他指标一起出现的指标，从而涵盖所有组合。这为表本身设置了一个固定大小，即 2 _x_行，其中_x_是指标个数。该解决方案适用于设计人员希望遇到许多不同组合并且可能的组合被限制在可接受水平的情况。如果指标数量很多，从而创建一个非常大的表，或者设计者只希望遇到一些可能的组合，那么在遇到新组合时在垃圾维度中构建每一行会更合适. 为了限制表格的大小，多个垃圾维度在其他情况下可能是合适的，具体取决于各种指标之间的相关性。

垃圾维度也适用于放置事实表中的非通用评论等属性。当客户下订单时，此类属性可能包含来自可选评论字段的数据，因此在许多情况下可能为空白。因此，垃圾维度应该包含一个表示空白的行作为代理键，该代理键将在事实表中用于返回带有空白注释字段的每一行。

### 退化维度

退化维度是一个键，例如交易号、发票号、票号或提货单号，它们没有属性，因此不会连接到实际的维度表。当事实表的粒度表示单个事务项或行项时，退化维度非常常见，因为退化维度表示父项的唯一标识符。退化维度通常在事实表的主键中起着不可或缺的作用。

### 角色扮演维度

维度通常在同一个数据库中为多个应用程序回收。例如，“日期”维度可用于“销售日期”、“交货日期”或“租用日期”。这通常被称为“角色扮演维度”。这可以使用同一维表上的视图来实现。

### 支架维度

通常维度表不通过外键引用其他维度。发生这种情况时，将这种维度称为支架维度。支架维度应被视为数据仓库反模式：使用一些关联两个维度的事实表被认为是更好的做法。

### 收缩维度

当符合的维度包括原始维度的行和/或列的子集时，它被称为收缩维度。

### 日期维度

可以使用一种特殊类型的维度来表示具有一天粒度的日期。[日期将在事实表](https://en.wikipedia.org/wiki/Fact_table "事实表")中作为日期维度的外键被引用。日期维度主键可以是代理键或使用 YYYYMMDD 格式的数字。

日期维度可以包括其他属性，如一年中的第几周，或表示工作日、假期等的标志。它还可以包括表示：未知日期或尚未定义日期的特殊行。日期维度应使用所有必需的日期进行初始化，例如下一个 10 年的日期，或者如果需要的话，或者过去的日期（如果处理过去的事件）。

[相反，时间通常最好表示为事实表](https://en.wikipedia.org/wiki/Fact_table "事实表")中的时间戳。


# 参考文献

[维基百科：维度（数据仓库）](https://en.wikipedia.org/wiki/Dimension_(data_warehouse)#Dimension_table)