---
aliases: TiDB 选择聚簇索引时应遵守的规则
created_at: 2023-08-08 17:23
tags: tidb, principle
---

# Content

- 遵循 [[TiDB 选择主键时应遵守的原则]]
- 在以下场景中，尽量使用 [[聚簇索引]]，将带来性能和吞吐量优势：
	- 插入数据时，会减少一次从网络写入索引数据
	- 等值条件查询仅涉及主键时，会减少一次从网络读取数据
	- 范围条件查询仅设计主键时，会减少多次从网络读取数据
	- 等值或范围条件查询仅涉及主键的前缀时，会减少多次从网络读取数据
- 在以下场景中，尽量避免使用聚簇索引：
	- 批量插入大量取值相邻的主键时，可能会产生较大的写热点问题，请遵循 [[TiDB 选择主键时应遵守的原则]]
	- 当使用大于64位的数据类型作为主键时，可能导致表数据需要占用更多的存储空间。该现象在存在多个二级索引时尤为明显。
- 显式指定是否使用 [[聚簇索引]]，而非使用系统变量 _@@global.tidb_enable_clustered_index_ 及配置项 _alter_primary_key_ 控制是否使用聚簇索引的默认行为。

# References
